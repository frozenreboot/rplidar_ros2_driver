# RPLIDAR ROS2 DRIVER
# Part of the rplidar_ros2_driver package. See LICENSE file for details.

rplidar_node:
  ros__parameters:
    serial_port: "/dev/rplidar"

    # ---------------------------------------------------------
    # Baudrate Settings (model-dependent)
    #   A1 / A2M8               : 115200
    #   A2M7 / A2M12 / A3 / S1  : 256000
    #   C1                      : 460800
    #   S2 / S3                 : 1000000
    # ---------------------------------------------------------
    serial_baudrate: 1000000

    frame_id: "laser_frame"
    inverted: false

    # [1] Hardware / SDK Level: Geometric / angle compensation in the SDK
    #
    # A-series : true  (recommended / required)
    # S-series : false (recommended for lower SDK load and to preserve raw data)
    #
    # NOTE: This flag is interpreted by the driver implementation.
    angle_compensate: true

    # [2] Software / ROS Level: Scan processing on the node side
    #
    # true  : Resample data into a fixed angular grid (uniform angle increments).
    #         Required for typical SLAM / Navigation stacks that assume dense,
    #         evenly spaced LaserScan ranges.
    # false : Publish raw measurements as-is (angle spacing may be non-uniform).
    #         Useful mainly for debugging or custom consumers.
    scan_processing: false

    # ---------------------------------------------------------
    # [Smart Auto-Detection Settings]
    # Leave these EMPTY or 0 to let the driver select reasonable defaults.
    # ---------------------------------------------------------

    # scan_mode:
    #   Specific scan mode name (e.g. "DenseBoost", "Standard", "Express").
    #   Set to an empty string ("") to auto-detect a suitable mode
    #   (e.g. S3 -> "DenseBoost").
    scan_mode: ""

    # rpm:
    #   Motor speed in RPM.
    #   Set to 0 to use the model's default (e.g. ~600 RPM).
    rpm: 0

    # max_distance:
    #   Maximum range clip in meters.
    #   Set to 0.0 to use the hardware limit detected via the SDK
    #   (e.g. S3 -> 40.0 m).
    max_distance: 0.0

    # dummy_mode:
    #   true  : Run in simulation mode (no hardware required).
    #   false : Use real hardware via the Slamtec SDK.
    dummy_mode: false

    # =========================================================
    # [3] Driver Features (extensions added by frozenreboot)
    # =========================================================

    # publish_tf:
    #   true  : The node publishes a static TF (e.g. base_link -> laser_frame).
    #           Handy for quick tests or minimal setups.
    #   false : Assume TF is provided by URDF / robot_state_publisher or
    #           other dedicated TF sources. Recommended for production robots.
    publish_tf: true

    # qos_reliability:
    #   "best_effort" : Prioritize throughput (typical choice for sensor data,
    #                   similar to UDP semantics).
    #   "reliable"    : Prioritize delivery guarantees (similar to TCP semantics);
    #                   may be useful on unstable networks, at the cost of latency.
    qos_reliability: "best_effort"
    
    # max_retries:
    #   Number of allowed communication errors before resetting the driver.
    #   Recommended: 3 (~4-6s delay) for quicker disconnect detection.
    #   If this value is too small, temporary noise may be treated as a disconnect.
    #   The SDK checks device status every ~2 seconds,
    #   so the actual detection time ≈ max_retries × 2s.
    max_retries: 3